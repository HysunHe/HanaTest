<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.oda.ext.dao.ConfigMapper">
	
	<select id="listConfigByKind" parameterType="string" resultType="com.oracle.oda.ext.domains.Config" databaseId="oracle">
		SELECT 
			ID as id, 
			DISPLAY as display,
			VALUE as value,
			KIND as kind,
			KEY as key,
			CREATED_AT as created_at,
			UPDATED_AT as updated_at
		FROM BOT_CONFIG
		WHERE KIND=#{kind}
	</select>
	
	<select id="getProperty" resultType="com.oracle.oda.ext.domains.Config" databaseId="oracle">
		SELECT 
			ID as id, 
			DISPLAY as display,
			VALUE as value,
			KIND as kind,
			KEY as key,
			CREATED_AT as created_at,
			UPDATED_AT as updated_at
		FROM BOT_CONFIG
		WHERE KIND=#{kind} and (ID=#{key} OR DISPLAY=#{key} OR KEY=#{key})
	</select>
	
	<delete id="deleteKind" parameterType="string" databaseId="oracle">
		DELETE FROM BOT_CONFIG WHERE KIND=#{kind}
	</delete>
	
	<insert id="insertAll" parameterType="java.util.List" databaseId="oracle">
		INSERT ALL        
		<foreach item="item" index="index" collection="list">
			INTO BOT_CONFIG 
			(
				ID,
				DISPLAY,
				VALUE,
				KIND,
				KEY,
				CREATED_AT,
				UPDATED_AT
			) VALUES (
				#{item.id},
				#{item.display},
				#{item.value,jdbcType=VARCHAR},
				#{item.kind,jdbcType=VARCHAR},
				#{item.key,jdbcType=VARCHAR},
				#{item.created_at},
				#{item.updated_at}
			)
		</foreach>
		SELECT 1 FROM DUAL
	</insert>
</mapper>